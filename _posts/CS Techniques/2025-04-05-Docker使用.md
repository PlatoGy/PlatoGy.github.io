---
layout: post
title: Dockerä½¿ç”¨
author: Patrick Gao
date: 2025-04-05 01:11
categories:
  - CS Techniques
tags:
  - Docker
mermaid: true
math: true
pin: false
---

# ğŸ³ Docker å­¦ä¹ ç¬”è®°

## ğŸ“Œ ä¸€ã€Docker æ˜¯ä»€ä¹ˆï¼Ÿ

> Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨å¹³å°ï¼Œç”¨äº**æ‰“åŒ…ã€åˆ†å‘ã€è¿è¡Œå’Œç®¡ç†åº”ç”¨åŠå…¶ä¾èµ–ç¯å¢ƒ**ã€‚

- å®¹å™¨æ˜¯ä¸€ç§è½»é‡çº§ã€å¯ç§»æ¤ã€è‡ªç»™è‡ªè¶³çš„è½¯ä»¶è¿è¡Œç¯å¢ƒã€‚
- å®ƒè§£å†³äº†â€œåœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è·‘â€çš„é—®é¢˜ã€‚

## âš™ï¸ äºŒã€Docker æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ        | è¯´æ˜ |
|-------------|------|
| **Imageï¼ˆé•œåƒï¼‰**     | åº”ç”¨å’Œç¯å¢ƒçš„æ¨¡æ¿ï¼Œé™æ€ |
| **Containerï¼ˆå®¹å™¨ï¼‰** | é•œåƒçš„è¿è¡Œå®ä¾‹ï¼ŒåŠ¨æ€ |
| **Dockerfile**        | æ„å»ºé•œåƒçš„è„šæœ¬ï¼ˆè¯´æ˜ä¹¦ï¼‰ |
| **Volumeï¼ˆå·ï¼‰**      | å®¹å™¨å’Œå®¿ä¸»æœºä¹‹é—´å…±äº«æ•°æ® |
| **Networkï¼ˆç½‘ç»œï¼‰**   | å®¹å™¨ä¹‹é—´é€šä¿¡çš„æ–¹å¼ |
| **Docker Hub**        | å®˜æ–¹é•œåƒä»“åº“ |

## ğŸ› ï¸ ä¸‰ã€å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### ğŸ” é•œåƒæ“ä½œ

```bash
docker pull é•œåƒå
docker images
docker rmi é•œåƒID
```

### ğŸ“¦ å®¹å™¨æ“ä½œ

```bash
docker run -it é•œåƒå bash
docker run -d é•œåƒå
docker ps
docker ps -a
docker stop å®¹å™¨ID
docker rm å®¹å™¨ID
docker exec -it å®¹å™¨ID bash
```

## ğŸ§± å››ã€Dockerfile è¯­æ³•è¯´æ˜

```Dockerfile
FROM node:18
WORKDIR /app
COPY . .
RUN npm install
EXPOSE 3000
CMD ["npm", "start"]
```

## ğŸš€ äº”ã€æ„å»ºå’Œè¿è¡Œ

```bash
docker build -t my-app .
docker run -p 3000:3000 my-app
```

## ğŸ“‚ å…­ã€æ•°æ®å·ï¼ˆVolumesï¼‰

```bash
docker run -v $(pwd):/app -w /app node:18 npm start
```

## ğŸŒ ä¸ƒã€ç«¯å£æ˜ å°„

```bash
docker run -p æœ¬æœºç«¯å£:å®¹å™¨ç«¯å£ é•œåƒå
```

## ğŸ” å…«ã€é€€å‡ºå®¹å™¨æ–¹æ³•

| åœºæ™¯ | é€€å‡ºæ–¹å¼ |
|------|----------|
| å‰å°è¿è¡Œå®¹å™¨ | `Ctrl + C` |
| å®¹å™¨äº¤äº’ bash | `exit` æˆ– `Ctrl + D` |
| åå°å®¹å™¨ | `docker stop å®¹å™¨ID` |

## ğŸ§­ ä¹ã€Nginx + Docker ç®€ä»‹

```Dockerfile
FROM nginx:latest
COPY dist/your-app /usr/share/nginx/html
```

## ğŸ“¦ åã€docker-compose ç®€ä»‹

```yaml
version: "3.9"
services:
  web:
    build: .
    ports:
      - "4200:4200"
  api:
    image: node:18
    volumes:
      - ./api:/app
    working_dir: /app
    command: npm start
    ports:
      - "3000:3000"
```

```bash
docker-compose up -d
```

## ğŸ§  åä¸€ã€å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | åŸå› /è§£å†³ |
|------|-----------|
| å®¹å™¨ç«¯å£æ— æ³•è®¿é—® | æ²¡ç›‘å¬ 0.0.0.0ï¼Œéœ€åŠ  `--host 0.0.0.0` |
| port is already allocated | ç«¯å£è¢«å ç”¨ï¼Œéœ€ stop å®¹å™¨ |
| å®¹å™¨é€€å‡ºå¤ªå¿« | CMD å‘½ä»¤æ²¡æœ‰é˜»å¡ |
| å®¹å™¨ä¸å®æ—¶æ›´æ–° | æ²¡æŒ‚è½½ volume |

## âœ… åäºŒã€æœ€ä½³å®è·µå»ºè®®

- ä½¿ç”¨ `.dockerignore` å¿½ç•¥ node_modulesã€dist
- ç²¾ç®€é•œåƒï¼Œåˆ†å±‚æ¸…æ™°
- å¼€å‘ç”¨çƒ­æ›´æ–°ï¼Œç”Ÿäº§ç”¨æ„å»ºåé•œåƒ
- ç”¨ docker-compose ç®¡å¤šä¸ªæœåŠ¡
